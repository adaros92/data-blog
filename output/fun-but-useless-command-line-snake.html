<!DOCTYPE html>
<html lang="en">

<head>
            <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>Deciphering Big Data</title>

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-DZPNKZL3NS"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'G-DZPNKZL3NS');
        </script>


        <!-- Bootstrap Core CSS -->
        <link href="/theme/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="/theme/css/clean-blog.min.css" rel="stylesheet">

        <!-- Code highlight color scheme -->
            <link href="/theme/css/code_blocks/darkly.css" rel="stylesheet">

        <!-- Custom Fonts -->
        <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
        




        <meta name="tags" contents="Programming" />


			<meta property="og:locale" content="en">
		<meta property="og:site_name" content="Deciphering Big Data">

	<meta property="og:type" content="article">
	<meta property="article:author" content="">
	<meta property="og:url" content="/fun-but-useless-command-line-snake.html">
	<meta property="og:title" content="Fun but Useless: Command Line Snake">
	<meta property="og:description" content="">
	<meta property="og:image" content="//static/post6/header.jpg">
	<meta property="article:published_time" content="2020-12-13 00:00:00-08:00">
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Deciphering Big Data</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
        <header class="intro-header" style="background-image: url('/static/post6/header.jpg');opacity: 0.9">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>Fun but Useless: Command Line Snake</h1>
                        <span class="meta">Posted by
                                <a href="https://www.linkedin.com/in/adamsr09/">Adams Rosales</a>
                             on Sun 13 December 2020
                        </span>
                        
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
    <!-- Post Content -->
    <article>
        <div class="section" id="design">
<h2>Design</h2>
<p>Nobody: ...</p>
<p>Me on a Sunday night: I feel like building a command line Snake game.</p>
<p>What does this have to do with big data? Probably nothing but the heart wants what it wants. Let's get started!</p>
<p>In usual object-oriented fashion, we'll have the following classes.</p>
<ul class="simple">
<li>Game - contains the game loop and manages interactions between the objects involved in the game</li>
<li>Snake - represents the actual Snake by managing its movement and eating functionality</li>
<li>Board - contains the state of the Snake grid (location of the snake and food items)</li>
<li>Player - represents the single Snake player by handling key events</li>
<li>Food - little yummy bits that the snake eats to grow</li>
</ul>
</div>
<div class="section" id="snake-implementation">
<h2>Snake Implementation</h2>
<p>I have chosen Python as the programming language because the python is a type of snake. There are many kinds of python -
ball python, Burmese python, Borneo python, Timor python...the list goes on.</p>
<p>Anyway let's start by implementing the ssssnake itself.</p>
<img alt="I'm a ssssnake" src="https://media.giphy.com/media/sjr7k1uuO0B0c/giphy.gif" style="width: 50%;" />
<p>When the snake moves, different segments of its body can be moving in different directions (left, up, right, or down)
on the grid. Representing the snake as a linked list will allow us to manage the snake as a collection of individual
nodes where each node encapsulates information about its coordinates on the grid and direction of movement.</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Node</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="sd">&quot;&quot;&quot; Represents each node in the body of the snake &quot;&quot;&quot;</span>

<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_coordinate</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y_coordinate</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
             <span class="n">representation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">next_node</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prev_node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">x_coordinate</span> <span class="o">=</span> <span class="n">x_coordinate</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">y_coordinate</span> <span class="o">=</span> <span class="n">y_coordinate</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">representation</span> <span class="o">=</span> <span class="n">representation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">next_node</span> <span class="o">=</span> <span class="n">next_node</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prev_node</span> <span class="o">=</span> <span class="n">prev_node</span>

<span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">representation</span>

<span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</pre></div>
<p>Cool, we have a way to keep some state about each individual component of the snake's body. Now let's implement the
body of the snake.</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Body</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="sd">&quot;&quot;&quot; Represents the body of the snake; Defines common functionality for growing and moving &quot;&quot;&quot;</span>

<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_coordinate</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y_coordinate</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">x_coordinate</span> <span class="o">=</span> <span class="n">x_coordinate</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">y_coordinate</span> <span class="o">=</span> <span class="n">y_coordinate</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">x_coordinate</span><span class="p">,</span> <span class="n">y_coordinate</span><span class="p">,</span> <span class="n">direction</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span>
    <span class="c1"># Grow the body to the desired initial length</span>
    <span class="k">if</span> <span class="n">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grow</span><span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

<span class="nd">@property</span>
<span class="k">def</span> <span class="nf">coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
    <span class="n">coordinates_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tmp_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span>
    <span class="k">while</span> <span class="n">tmp_node</span><span class="p">:</span>
        <span class="n">coordinates_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">tmp_node</span><span class="o">.</span><span class="n">x_coordinate</span><span class="p">,</span> <span class="n">tmp_node</span><span class="o">.</span><span class="n">y_coordinate</span><span class="p">))</span>
        <span class="n">tmp_node</span> <span class="o">=</span> <span class="n">tmp_node</span><span class="o">.</span><span class="n">next_node</span>
    <span class="k">return</span> <span class="n">coordinates_list</span>

<span class="k">def</span> <span class="nf">change_direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Changes the current body&#39;s direction of movement</span>
<span class="sd">    :param new_direction - one of four possible directions to move the body in</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">opposite_direction</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;left&quot;</span><span class="p">:</span> <span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="s2">&quot;down&quot;</span><span class="p">:</span> <span class="s2">&quot;up&quot;</span><span class="p">,</span> <span class="s2">&quot;up&quot;</span><span class="p">:</span> <span class="s2">&quot;down&quot;</span><span class="p">}[</span><span class="bp">self</span><span class="o">.</span><span class="n">direction</span><span class="p">]</span>
    <span class="c1"># Only change the current direction if it&#39;s not opposite of the current direction</span>
    <span class="k">if</span> <span class="n">new_direction</span> <span class="o">!=</span> <span class="n">opposite_direction</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">new_direction</span>

<span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">_create_new_node</span><span class="p">(</span><span class="n">direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prev_node</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
    <span class="n">x_coordinate</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">y_coordinate</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span>
        <span class="n">x_coordinate</span> <span class="o">=</span> <span class="n">prev_node</span><span class="o">.</span><span class="n">x_coordinate</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">y_coordinate</span> <span class="o">=</span> <span class="n">prev_node</span><span class="o">.</span><span class="n">y_coordinate</span>
    <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span>
        <span class="n">x_coordinate</span> <span class="o">=</span> <span class="n">prev_node</span><span class="o">.</span><span class="n">x_coordinate</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="n">y_coordinate</span> <span class="o">=</span> <span class="n">prev_node</span><span class="o">.</span><span class="n">y_coordinate</span>
    <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;up&quot;</span><span class="p">:</span>
        <span class="n">x_coordinate</span> <span class="o">=</span> <span class="n">prev_node</span><span class="o">.</span><span class="n">x_coordinate</span>
        <span class="n">y_coordinate</span> <span class="o">=</span> <span class="n">prev_node</span><span class="o">.</span><span class="n">y_coordinate</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;down&quot;</span><span class="p">:</span>
        <span class="n">x_coordinate</span> <span class="o">=</span> <span class="n">prev_node</span><span class="o">.</span><span class="n">x_coordinate</span>
        <span class="n">y_coordinate</span> <span class="o">=</span> <span class="n">prev_node</span><span class="o">.</span><span class="n">y_coordinate</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">new_node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">x_coordinate</span><span class="p">,</span> <span class="n">y_coordinate</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">prev_node</span><span class="o">=</span><span class="n">prev_node</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">new_node</span>

<span class="k">def</span> <span class="nf">grow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Grows the current body by the specified amount of nodes</span>
<span class="sd">    :param by - the number of nodes to grow the body by</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">by</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">new_node_chain</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">last_node</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># Create a new chain of nodes to append to the end of the body</span>
    <span class="k">for</span> <span class="n">new_node_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">by</span><span class="p">):</span>
        <span class="c1"># Create the first node in the chain</span>
        <span class="k">if</span> <span class="n">new_node_num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">new_node_chain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_new_node</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tail</span><span class="o">.</span><span class="n">direction</span><span class="p">,</span> <span class="n">prev_node</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tail</span><span class="p">)</span>
            <span class="n">last_node</span> <span class="o">=</span> <span class="n">new_node_chain</span>
        <span class="c1"># Create all the other nodes after the first one and add them to the chain</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmp_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_new_node</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="n">last_node</span><span class="o">.</span><span class="n">direction</span><span class="p">,</span> <span class="n">prev_node</span><span class="o">=</span><span class="n">last_node</span><span class="p">)</span>
            <span class="n">last_node</span><span class="o">.</span><span class="n">next_node</span> <span class="o">=</span> <span class="n">tmp_node</span>
            <span class="n">last_node</span> <span class="o">=</span> <span class="n">tmp_node</span>
    <span class="c1"># Integrate the new chain as part of the current body</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tail</span><span class="o">.</span><span class="n">next_node</span> <span class="o">=</span> <span class="n">new_node_chain</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tail</span> <span class="o">=</span> <span class="n">last_node</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">+=</span> <span class="n">by</span>

<span class="k">def</span> <span class="nf">slither</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">speed</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Moves the body in its current direction of movement</span>
<span class="sd">    :param speed - the speed to move the body in</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Each node will assign its direction and coordinate to the next node</span>
    <span class="n">tmp_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">next_node</span>
    <span class="n">tmp_x_coordinate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">x_coordinate</span>
    <span class="n">tmp_y_coordinate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">y_coordinate</span>
    <span class="k">while</span> <span class="n">tmp_node</span><span class="p">:</span>
        <span class="n">new_x_coordinate</span> <span class="o">=</span> <span class="n">tmp_node</span><span class="o">.</span><span class="n">x_coordinate</span>
        <span class="n">new_y_coordinate</span> <span class="o">=</span> <span class="n">tmp_node</span><span class="o">.</span><span class="n">y_coordinate</span>
        <span class="n">tmp_node</span><span class="o">.</span><span class="n">x_coordinate</span> <span class="o">=</span> <span class="n">tmp_x_coordinate</span>
        <span class="n">tmp_node</span><span class="o">.</span><span class="n">y_coordinate</span> <span class="o">=</span> <span class="n">tmp_y_coordinate</span>
        <span class="n">tmp_node</span> <span class="o">=</span> <span class="n">tmp_node</span><span class="o">.</span><span class="n">next_node</span>
        <span class="n">tmp_x_coordinate</span> <span class="o">=</span> <span class="n">new_x_coordinate</span>
        <span class="n">tmp_y_coordinate</span> <span class="o">=</span> <span class="n">new_y_coordinate</span>
    <span class="c1"># Once all other nodes have moved, the head moves to new location</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">x_coordinate</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">y_coordinate</span> <span class="o">=</span> <span class="n">movement</span><span class="o">.</span><span class="n">resolve_movement</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">x_coordinate</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">y_coordinate</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span><span class="p">)</span>

<span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">node_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tmp_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span>
    <span class="k">while</span> <span class="n">tmp_node</span><span class="p">:</span>
        <span class="n">node_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tmp_node</span><span class="p">))</span>
        <span class="n">tmp_node</span> <span class="o">=</span> <span class="n">tmp_node</span><span class="o">.</span><span class="n">next_node</span>
    <span class="k">return</span> <span class="s2">&quot;-&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">node_list</span><span class="p">)</span>

<span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</pre></div>
<p>This just takes a starting location for the head of the snake and direction of movement. It implements the core methods
of eating/growing and moving.</p>
<p>We will emulate movement with the slither method as follows:</p>
<ol class="arabic simple">
<li>Iterate over each node in the snake</li>
<li>Get the previous node's coordinates and direction of movement and assign them to the current node</li>
<li>Move the head of the snake to a new coordinate based on the direction of movement</li>
</ol>
<p>The last step of assigning a new coordinate to the head based on the direction of movement is implemented with the following
utility function.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">resolve_movement</span><span class="p">(</span><span class="n">x_coordinate</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y_coordinate</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
<span class="sd">&quot;&quot;&quot; Given current coordinates and a movement around a 2D grid, this function will return new coordinates that</span>
<span class="sd">reflect that movement in 2 dimensional space</span>
<span class="sd">:param x_coordinate - x-coordinate identifying the starting point on a 2D grid</span>
<span class="sd">:param y_coordinate - y-coordinate identifying the starting point on a 2D grid</span>
<span class="sd">:param direction - one of four possible directions to move in</span>
<span class="sd">:returns a tuple of integers representing a new point (x-coordinate, y-coordinate)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="k">assert</span> <span class="n">direction</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;up&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;down&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">}</span>
<span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;up&quot;</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">x_coordinate</span><span class="p">,</span> <span class="n">y_coordinate</span> <span class="o">-</span> <span class="mi">1</span>
<span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">x_coordinate</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y_coordinate</span>
<span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;down&quot;</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">x_coordinate</span><span class="p">,</span> <span class="n">y_coordinate</span> <span class="o">+</span> <span class="mi">1</span>
<span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">x_coordinate</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y_coordinate</span>
</pre></div>
<p>The body's grow method simply creates a given number of new node and appends it to the end of the linked list. This
method will be called whenever the snake eats a tasty boi on the grid.</p>
<p>Finally there is the Snake class itself which implements a higher level API that the game will communicate with. This
includes methods for eating and moving. The snake class will manage its body accordingly when these methods are called.</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Snake</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="sd">&quot;&quot;&quot; Represents the snake itself</span>
<span class="sd">Constructor arguments:</span>
<span class="sd">:param x_coordinate - the starting x-coordinate of the snake&#39;s head</span>
<span class="sd">:param y_coordinate - the starting y-coordinate of the snake&#39;s head</span>
<span class="sd">:param starting_length - the snake&#39;s starting node length</span>
<span class="sd">:param starting_direction - the starting direction of movement that the snake will immediately head in</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
             <span class="n">x_coordinate</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y_coordinate</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
             <span class="n">starting_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">starting_direction</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">Body</span><span class="p">(</span><span class="n">x_coordinate</span><span class="p">,</span> <span class="n">y_coordinate</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">starting_length</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">starting_direction</span><span class="p">)</span>

<span class="nd">@property</span>
<span class="k">def</span> <span class="nf">current_location</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Retrieves a list of coordinate tuples representing the snake&#39;s location on a snake grid</span>
<span class="sd">    Example: [(0,1), (1,1)] is a 2 node long snake and on a 3 x 3 grid will look like this:</span>
<span class="sd">    _ _ _</span>
<span class="sd">    * * _</span>
<span class="sd">    _ _ _</span>
<span class="sd">    :returns a list of coordinate tuples</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">coordinates</span>

<span class="nd">@property</span>
<span class="k">def</span> <span class="nf">current_direction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Retrieves the snake&#39;s current direction of movement</span>
<span class="sd">    :returns a direction string (left, up, right, down)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">direction</span>

<span class="k">def</span> <span class="nf">eat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">food_to_eat</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Eats a given food and makes the snake grow by the food&#39;s growth value</span>
<span class="sd">    :param food_to_eat - a food object as defined in food.py</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">grow</span><span class="p">(</span><span class="n">food_to_eat</span><span class="o">.</span><span class="n">growth_value</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Moves the snake by changing the direction to the new direction and altering the corresponding</span>
<span class="sd">    coordinates based on that direction of movement</span>
<span class="sd">    :param new_direction - the direction of movement (left, up, right, down)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Change direction</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">change_direction</span><span class="p">(</span><span class="n">new_direction</span><span class="p">)</span>
    <span class="c1"># Move</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">slither</span><span class="p">()</span>

<span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>

<span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="player-implementation">
<h2>Player Implementation</h2>
<p>The player in the game of Snake just presses up, down, left, and right arrow keys on their keyboard to move the snake.
We can implement that by adding a listener that runs in a separate thread which will populate a queue with key presses.
Back in the original game thread, we will keep the state of the last key that was pressed in a map of key name to a
pressed boolean. Whenever a new event comes through the status will be updated for the corresponding key in the map.</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">import</span> <span class="nn">threading</span>

<span class="kn">from</span> <span class="nn">curtsies</span> <span class="kn">import</span> <span class="n">Input</span>


<span class="k">class</span> <span class="nc">Player</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">player_id</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid1</span><span class="p">(),</span> <span class="n">computer</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">player_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">player_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finished_game</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computer</span> <span class="o">=</span> <span class="n">computer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keys</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;up&quot;</span><span class="p">:</span> <span class="s2">&quot;&#39;&lt;UP&gt;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span> <span class="s2">&quot;&#39;&lt;RIGHT&gt;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span> <span class="s2">&quot;&#39;&lt;LEFT&gt;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;down&quot;</span><span class="p">:</span> <span class="s2">&quot;&#39;&lt;DOWN&gt;&#39;&quot;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_to_key_map</span> <span class="o">=</span> <span class="p">{</span><span class="n">val</span><span class="p">:</span> <span class="n">key</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key_pressed_map</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="kc">False</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">monitoring_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thread</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_detect_key_pressed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Detects presses of individual keys and marks those keys as pressed in common object &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="c1"># Check to see if any keys have been pressed</span>
            <span class="k">with</span> <span class="n">Input</span><span class="p">(</span><span class="n">keynames</span><span class="o">=</span><span class="s1">&#39;curtsies&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">input_generator</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">input_generator</span><span class="p">:</span>
                    <span class="c1"># Iterate over the applicable keys the player can press</span>
                    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_to_key_map</span><span class="p">:</span>
                        <span class="n">pretty_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_to_key_map</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                        <span class="c1"># If the player has pressed a key that is being tracked</span>
                        <span class="k">if</span> <span class="nb">repr</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
                            <span class="c1"># Signal that the key has been pressed in common object</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">key_pressed_map</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="kc">False</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_pressed_map</span><span class="p">}</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">key_pressed_map</span><span class="p">[</span><span class="n">pretty_key</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">finished_game</span><span class="p">:</span>
                <span class="k">break</span>

    <span class="k">def</span> <span class="nf">monitor_key_presses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">how</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;thread&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">how</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;thread&quot;</span><span class="p">,</span> <span class="s2">&quot;block&quot;</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">how</span> <span class="o">==</span> <span class="s2">&quot;block&quot;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">key</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;A keyboard key name must be provided to block until key is pressed&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">how</span> <span class="o">==</span> <span class="s2">&quot;thread&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_detect_key_pressed</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="c1"># TODO blocking key press</span>

    <span class="k">def</span> <span class="nf">wait_for_player_to_finish</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></div>
<p>Here I'm using the Input class from the curtsies library which handles the event listening for me. The _detect_key_pressed
method will simply iterate over each generated key and update the map of pressed keys. It will always update the map with
the last key pressed only. There cannot be multiple keys pressed at one time since that doesn't make sense in the context
of snake.</p>
<p>The monitor_key_presses method just launches a new thread that runs the _detect_key_pressed method. The thread here is
not an actual thread because of the GIL (check out my <a class="reference external" href="python-parallelism.html.html">previous post</a>) but it works well
enough for our purposes.</p>
</div>
<div class="section" id="board-implementation">
<h2>Board Implementation</h2>
<p>Now we implement the board where all the action will take place. The snake will move around the board eating snacks until
it bumps into one of the walls.</p>
</div>
<div class="section" id="learnings">
<h2>Learnings</h2>
</div>

    </article>

    <hr>

            </div>
        </div>
    </div>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
                <p class="copyright text-muted">Learn more about me at my <a href="https://www.linkedin.com/in/adamsr09/">LinkedIn</a> or <a href="https://github.com/adaros92">Github</a>.</p>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="/theme/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/theme/js/bootstrap.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="/theme/js/clean-blog.min.js"></script>

</body>

</html>